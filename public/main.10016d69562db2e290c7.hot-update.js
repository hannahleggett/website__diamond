/*! For license information please see main.10016d69562db2e290c7.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatediamond("main",{"./app/classes/Hover.js":(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var r=i("./app/classes/Component.js"),s=i("./node_modules/gsap/index.js");Object(function(){var e=new Error("Cannot find module 'utils'");throw e.code="MODULE_NOT_FOUND",e}());let a={x:0,y:0},n=a,o={x:n.x-a.x,y:n.y-a.y};class l extends r.default{constructor({element:e}){super({element:e}),this.DOM=this.element,this.element.image=e.getAttribute("data-src"),this.layout(),this.initEvents()}layout(){this.DOM.reveal=document.createElement("div"),this.DOM.reveal.className="hover-reveal",this.DOM.revealInner=document.createElement("div"),this.DOM.revealInner.className="hover-reveal__inner",this.DOM.revealImage=document.createElement("div"),this.DOM.revealImage.className="hover-reveal__img",this.DOM.revealImage.style.backgroundImage=`url(${this.element.image})`,this.DOM.revealInner.appendChild(this.DOM.revealImage),this.DOM.reveal.appendChild(this.DOM.revealInner),this.DOM.el.appendChild(this.DOM.reveal)}onMouseEnter(){this.showImage(),this.firstRAFCycle=!0,this.loopRender()}onMouseLeave(){this.stopRendering(),this.hideImage()}showImage(){s.default.killTweensOf(this.DOM.revealInner),s.default.killTweensOf(this.DOM.revealImage),this.tl=s.default.timeline({onStart:()=>{this.DOM.reveal.style.opacity=1,s.default.set(this.DOM.el,{zIndex:images.length})}}).to(this.DOM.revealInner,.2,{ease:"Sine.easeOut",startAt:{x:o.x<0?"-100%":"100%"},x:"0%"}).to(this.DOM.revealImage,.2,{ease:"Sine.easeOut",startAt:{x:o.x<0?"100%":"-100%"},x:"0%"},0)}hideImage(){s.default.killTweensOf(this.DOM.revealInner),s.default.killTweensOf(this.DOM.revealImage),this.tl=s.default.timeline({onStart:()=>{s.default.set(this.DOM.el,{zIndex:1})},onComplete:()=>{s.default.set(this.DOM.reveal,{opacity:0})}}).to(this.DOM.revealInner,.2,{ease:"Sine.easeOut",x:o.x<0?"100%":"-100%"}).to(this.DOM.revealImage,.2,{ease:"Sine.easeOut",x:o.x<0?"-100%":"100%"},0)}loopRender(){this.requestId||(this.requestId=requestAnimationFrame((()=>this.render())))}stopRendering(){this.requestId&&(window.cancelAnimationFrame(this.requestId),this.requestId=void 0)}render(){this.requestId=void 0,this.firstRAFCycle&&this.calcBounds();const e=Object(function(){var e=new Error("Cannot find module 'utils'");throw e.code="MODULE_NOT_FOUND",e}())(Math.abs(n.x-a.x),0,100);o={x:n.x-a.x,y:n.y-a.y},n={x:a.x,y:a.y},this.animatableProperties.tx.current=Math.abs(a.x-this.bounds.el.left)-this.bounds.reveal.width/2,this.animatableProperties.ty.current=Math.abs(a.y-this.bounds.el.top)-this.bounds.reveal.height/2,this.animatableProperties.rotation.current=this.firstRAFCycle?0:Object(function(){var e=new Error("Cannot find module 'utils'");throw e.code="MODULE_NOT_FOUND",e}())(e,0,100,0,o.x<0?60:-60),this.animatableProperties.brightness.current=this.firstRAFCycle?1:Object(function(){var e=new Error("Cannot find module 'utils'");throw e.code="MODULE_NOT_FOUND",e}())(e,0,100,1,4),this.animatableProperties.tx.previous=this.firstRAFCycle?this.animatableProperties.tx.current:Object(function(){var e=new Error("Cannot find module 'utils'");throw e.code="MODULE_NOT_FOUND",e}())(this.animatableProperties.tx.previous,this.animatableProperties.tx.current,this.animatableProperties.tx.amt),this.animatableProperties.ty.previous=this.firstRAFCycle?this.animatableProperties.ty.current:Object(function(){var e=new Error("Cannot find module 'utils'");throw e.code="MODULE_NOT_FOUND",e}())(this.animatableProperties.ty.previous,this.animatableProperties.ty.current,this.animatableProperties.ty.amt),this.animatableProperties.rotation.previous=this.firstRAFCycle?this.animatableProperties.rotation.current:Object(function(){var e=new Error("Cannot find module 'utils'");throw e.code="MODULE_NOT_FOUND",e}())(this.animatableProperties.rotation.previous,this.animatableProperties.rotation.current,this.animatableProperties.rotation.amt),this.animatableProperties.brightness.previous=this.firstRAFCycle?this.animatableProperties.brightness.current:Object(function(){var e=new Error("Cannot find module 'utils'");throw e.code="MODULE_NOT_FOUND",e}())(this.animatableProperties.brightness.previous,this.animatableProperties.brightness.current,this.animatableProperties.brightness.amt),s.default.set(this.DOM.reveal,{x:this.animatableProperties.tx.previous,y:this.animatableProperties.ty.previous,rotation:this.animatableProperties.rotation.previous,filter:`brightness(${this.animatableProperties.brightness.previous})`}),this.firstRAFCycle=!1,this.loopRender()}addEventListeners(){window.addEventListener("mousemove",(e=>a=Object(function(){var e=new Error("Cannot find module 'utils'");throw e.code="MODULE_NOT_FOUND",e}())(e))),this.element.addEventListener("mouseenter",this.onMouseEnter),this.element.addEventListener("mouseleave",this.onMouseLeave)}removeEventListeners(){}}}},(function(e){e.h=()=>"a8c2786731809f8b510a"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFBQSxFQUFBQSxHQUFBQSxDQUFLMUQsS0FBSzZDLHFCQUFxQlcsV0FBV0MsU0FBVXpELEtBQUs2QyxxQkFBcUJXLFdBQVdULFFBQVMvQyxLQUFLNkMscUJBQXFCVyxXQUFXRyxLQUczUHBDLEVBQUFBLFFBQUFBLElBQVN2QixLQUFLQyxJQUFJSyxPQUFRLENBQ3hCZixFQUFHUyxLQUFLNkMscUJBQXFCQyxHQUFHVyxTQUNoQ2pFLEVBQUdRLEtBQUs2QyxxQkFBcUJNLEdBQUdNLFNBQ2hDSCxTQUFVdEQsS0FBSzZDLHFCQUFxQlMsU0FBU0csU0FDN0NHLE9BQVMsY0FBYTVELEtBQUs2QyxxQkFBcUJXLFdBQVdDLGNBSTdEekQsS0FBS2tCLGVBQWdCLEVBQ3JCbEIsS0FBS21CLGFBR1AwQyxvQkFFRXhCLE9BQU95QixpQkFBaUIsYUFBYUMsR0FBTXpFLEVBQVcwRSxPQUFBQSxXQUFBQSxJQUFBQSxFQUFBQSxJQUFBQSxNQUFBQSw4QkFBQUEsTUFBQUEsRUFBQUEsS0FBQUEsbUJBQUFBLEVBQUFBLEdBQUFBLENBQVlELEtBRWxFL0QsS0FBS0YsUUFBUWdFLGlCQUFpQixhQUFjOUQsS0FBS2dCLGNBQ2pEaEIsS0FBS0YsUUFBUWdFLGlCQUFpQixhQUFjOUQsS0FBS29CLGNBR25ENkMseUNDcExGQyxFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGlhbW9uZC8uL2FwcC9jbGFzc2VzL0hvdmVyLmpzIiwid2VicGFjazovL2RpYW1vbmQvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb21wb25lbnQgZnJvbSAnY2xhc3Nlcy9Db21wb25lbnQnXG5pbXBvcnQgR1NBUCBmcm9tICdnc2FwJ1xuaW1wb3J0IHsgbWFwLCBsZXJwLCBjbGFtcCwgZ2V0TW91c2VQb3MgfSBmcm9tICd1dGlscydcblxuLy8gdHJhY2sgdGhlIG1vdXNlIHBvc2l0aW9uXG5sZXQgbW91c2Vwb3MgPSB7IHg6IDAsIHk6IDAgfVxuLy8gY2FjaGUgdGhlIG1vdXNlIHBvc2l0aW9uXG5sZXQgbW91c2VQb3NDYWNoZSA9IG1vdXNlcG9zXG5cbmxldCBkaXJlY3Rpb24gPSB7XG4gIHg6IG1vdXNlUG9zQ2FjaGUueCAtIG1vdXNlcG9zLngsXG4gIHk6IG1vdXNlUG9zQ2FjaGUueSAtIG1vdXNlcG9zLnlcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5pbWF0aW9uIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IgKHsgZWxlbWVudCB9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgZWxlbWVudFxuICAgIH0pXG5cbiAgICB0aGlzLkRPTSA9IHRoaXMuZWxlbWVudFxuICAgIHRoaXMuZWxlbWVudC5pbWFnZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpXG5cbiAgICAvLyBjcmVhdGUgdGhlIGltYWdlIHN0cnVjdHVyZVxuICAgIHRoaXMubGF5b3V0KClcbiAgICAvLyBpbml0aWFsaXplIHNvbWUgZXZlbnRzXG4gICAgdGhpcy5pbml0RXZlbnRzKClcbiAgfVxuXG4gIGxheW91dCAoKSB7XG4gICAgLy8gdGhpcyBpcyB0aGUgZWxlbWVudCB0aGF0IGdldHMgaXRzIHBvc2l0aW9uIGFuaW1hdGVkIChhbmQgcGVyaGFwcyBvdGhlciBwcm9wZXJ0aWVzIGxpa2UgdGhlIHJvdGF0aW9uIGV0Yy4uKVxuICAgIHRoaXMuRE9NLnJldmVhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5ET00ucmV2ZWFsLmNsYXNzTmFtZSA9ICdob3Zlci1yZXZlYWwnXG4gICAgLy8gdGhlIG5leHQgdHdvIGVsZW1lbnRzIGNvdWxkIGFjdHVhbGx5IGJlIG9ubHkgb25lLCB0aGUgaW1hZ2UgZWxlbWVudFxuICAgIC8vIGFkZGluZyBhbiBleHRyYSB3cmFwcGVyIChyZXZlYWxJbm5lcikgYXJvdW5kIHRoZSBpbWFnZSBlbGVtZW50IHdpdGggb3ZlcmZsb3cgaGlkZGVuLCBnaXZlcyB1cyB0aGUgcG9zc2liaWxpdHkgdG8gc2NhbGUgdGhlIGltYWdlIGluc2lkZVxuICAgIHRoaXMuRE9NLnJldmVhbElubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aGlzLkRPTS5yZXZlYWxJbm5lci5jbGFzc05hbWUgPSAnaG92ZXItcmV2ZWFsX19pbm5lcidcbiAgICB0aGlzLkRPTS5yZXZlYWxJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5ET00ucmV2ZWFsSW1hZ2UuY2xhc3NOYW1lID0gJ2hvdmVyLXJldmVhbF9faW1nJ1xuICAgIHRoaXMuRE9NLnJldmVhbEltYWdlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLmVsZW1lbnQuaW1hZ2V9KWBcblxuICAgIHRoaXMuRE9NLnJldmVhbElubmVyLmFwcGVuZENoaWxkKHRoaXMuRE9NLnJldmVhbEltYWdlKVxuICAgIHRoaXMuRE9NLnJldmVhbC5hcHBlbmRDaGlsZCh0aGlzLkRPTS5yZXZlYWxJbm5lcilcbiAgICB0aGlzLkRPTS5lbC5hcHBlbmRDaGlsZCh0aGlzLkRPTS5yZXZlYWwpXG4gIH1cblxuICBvbk1vdXNlRW50ZXIgKCkge1xuICAgIC8vIHNob3cgdGhlIGltYWdlIGVsZW1lbnRcbiAgICB0aGlzLnNob3dJbWFnZSgpXG4gICAgdGhpcy5maXJzdFJBRkN5Y2xlID0gdHJ1ZVxuICAgIC8vIHN0YXJ0IHRoZSByZW5kZXIgbG9vcCBhbmltYXRpb24gKHJBRilcbiAgICB0aGlzLmxvb3BSZW5kZXIoKVxuICB9XG5cbiAgb25Nb3VzZUxlYXZlICgpIHtcbiAgICAvLyBzdG9wIHRoZSByZW5kZXIgbG9vcCBhbmltYXRpb24gKHJBRilcbiAgICB0aGlzLnN0b3BSZW5kZXJpbmcoKVxuICAgIC8vIGhpZGUgdGhlIGltYWdlIGVsZW1lbnRcbiAgICB0aGlzLmhpZGVJbWFnZSgpXG4gIH1cblxuICAvLyBzaG93IHRoZSBpbWFnZSBlbGVtZW50XG4gIHNob3dJbWFnZSAoKSB7XG4gICAgLy8ga2lsbCBhbnkgY3VycmVudCB0d2VlbnNcbiAgICBHU0FQLmtpbGxUd2VlbnNPZih0aGlzLkRPTS5yZXZlYWxJbm5lcilcbiAgICBHU0FQLmtpbGxUd2VlbnNPZih0aGlzLkRPTS5yZXZlYWxJbWFnZSlcblxuICAgIHRoaXMudGwgPSBHU0FQLnRpbWVsaW5lKHtcbiAgICAgIG9uU3RhcnQ6ICgpID0+IHtcbiAgICAgICAgLy8gc2hvdyB0aGUgaW1hZ2UgZWxlbWVudFxuICAgICAgICB0aGlzLkRPTS5yZXZlYWwuc3R5bGUub3BhY2l0eSA9IDFcbiAgICAgICAgLy8gc2V0IGEgaGlnaCB6LWluZGV4IHZhbHVlIHNvIGltYWdlIGFwcGVhcnMgb24gdG9wIG9mIG90aGVyIGVsZW1lbnRzXG4gICAgICAgIEdTQVAuc2V0KHRoaXMuRE9NLmVsLCB7IHpJbmRleDogaW1hZ2VzLmxlbmd0aCB9KVxuICAgICAgfVxuICAgIH0pXG4gICAgLy8gYW5pbWF0ZSB0aGUgaW1hZ2Ugd3JhcFxuICAgICAgLnRvKHRoaXMuRE9NLnJldmVhbElubmVyLCAwLjIsIHtcbiAgICAgICAgZWFzZTogJ1NpbmUuZWFzZU91dCcsXG4gICAgICAgIHN0YXJ0QXQ6IHsgeDogZGlyZWN0aW9uLnggPCAwID8gJy0xMDAlJyA6ICcxMDAlJyB9LFxuICAgICAgICB4OiAnMCUnXG4gICAgICB9KVxuICAgIC8vIGFuaW1hdGUgdGhlIGltYWdlIGVsZW1lbnRcbiAgICAgIC50byh0aGlzLkRPTS5yZXZlYWxJbWFnZSwgMC4yLCB7XG4gICAgICAgIGVhc2U6ICdTaW5lLmVhc2VPdXQnLFxuICAgICAgICBzdGFydEF0OiB7IHg6IGRpcmVjdGlvbi54IDwgMCA/ICcxMDAlJyA6ICctMTAwJScgfSxcbiAgICAgICAgeDogJzAlJ1xuICAgICAgfSwgMClcbiAgfVxuXG4gIC8vIGhpZGUgdGhlIGltYWdlIGVsZW1lbnRcbiAgaGlkZUltYWdlICgpIHtcbiAgICAvLyBraWxsIGFueSBjdXJyZW50IHR3ZWVuc1xuICAgIEdTQVAua2lsbFR3ZWVuc09mKHRoaXMuRE9NLnJldmVhbElubmVyKVxuICAgIEdTQVAua2lsbFR3ZWVuc09mKHRoaXMuRE9NLnJldmVhbEltYWdlKVxuXG4gICAgdGhpcy50bCA9IEdTQVAudGltZWxpbmUoe1xuICAgICAgb25TdGFydDogKCkgPT4ge1xuICAgICAgICBHU0FQLnNldCh0aGlzLkRPTS5lbCwgeyB6SW5kZXg6IDEgfSlcbiAgICAgIH0sXG4gICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgIEdTQVAuc2V0KHRoaXMuRE9NLnJldmVhbCwgeyBvcGFjaXR5OiAwIH0pXG4gICAgICB9XG4gICAgfSlcbiAgICAgIC50byh0aGlzLkRPTS5yZXZlYWxJbm5lciwgMC4yLCB7XG4gICAgICAgIGVhc2U6ICdTaW5lLmVhc2VPdXQnLFxuICAgICAgICB4OiBkaXJlY3Rpb24ueCA8IDAgPyAnMTAwJScgOiAnLTEwMCUnXG4gICAgICB9KVxuICAgICAgLnRvKHRoaXMuRE9NLnJldmVhbEltYWdlLCAwLjIsIHtcbiAgICAgICAgZWFzZTogJ1NpbmUuZWFzZU91dCcsXG4gICAgICAgIHg6IGRpcmVjdGlvbi54IDwgMCA/ICctMTAwJScgOiAnMTAwJSdcbiAgICAgIH0sIDApXG4gIH1cblxuICAvLyBzdGFydCB0aGUgcmVuZGVyIGxvb3AgYW5pbWF0aW9uIChyQUYpXG4gIGxvb3BSZW5kZXIgKCkge1xuICAgIGlmICghdGhpcy5yZXF1ZXN0SWQpIHtcbiAgICAgIHRoaXMucmVxdWVzdElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMucmVuZGVyKCkpXG4gICAgfVxuICB9XG5cbiAgLy8gc3RvcCB0aGUgcmVuZGVyIGxvb3AgYW5pbWF0aW9uIChyQUYpXG4gIHN0b3BSZW5kZXJpbmcgKCkge1xuICAgIGlmICh0aGlzLnJlcXVlc3RJZCkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmVxdWVzdElkKVxuICAgICAgdGhpcy5yZXF1ZXN0SWQgPSB1bmRlZmluZWRcbiAgICB9XG4gIH1cblxuICAvLyB0cmFuc2xhdGUgdGhlIGl0ZW0gYXMgdGhlIG1vdXNlIG1vdmVzXG4gIHJlbmRlciAoKSB7XG4gICAgdGhpcy5yZXF1ZXN0SWQgPSB1bmRlZmluZWRcbiAgICAvLyBjYWxjdWxhdGUgcG9zaXRpb24vc2l6ZXMgdGhlIGZpcnN0IHRpbWVcbiAgICBpZiAodGhpcy5maXJzdFJBRkN5Y2xlKSB7XG4gICAgICB0aGlzLmNhbGNCb3VuZHMoKVxuICAgIH1cblxuICAgIC8vIGNhbGN1bGF0ZSB0aGUgbW91c2UgZGlzdGFuY2UgKGN1cnJlbnQgdnMgcHJldmlvdXMgY3ljbGUpXG4gICAgY29uc3QgbW91c2VEaXN0YW5jZVggPSBjbGFtcChNYXRoLmFicyhtb3VzZVBvc0NhY2hlLnggLSBtb3VzZXBvcy54KSwgMCwgMTAwKVxuICAgIC8vIGRpcmVjdGlvbiB3aGVyZSB0aGUgbW91c2UgaXMgbW92aW5nXG4gICAgZGlyZWN0aW9uID0geyB4OiBtb3VzZVBvc0NhY2hlLnggLSBtb3VzZXBvcy54LCB5OiBtb3VzZVBvc0NhY2hlLnkgLSBtb3VzZXBvcy55IH1cbiAgICAvLyB1cGRhdGVkIGNhY2hlIHZhbHVlc1xuICAgIG1vdXNlUG9zQ2FjaGUgPSB7IHg6IG1vdXNlcG9zLngsIHk6IG1vdXNlcG9zLnkgfVxuXG4gICAgLy8gbmV3IHRyYW5zbGF0aW9uIHZhbHVlc1xuICAgIC8vIHRoZSBjZW50ZXIgb2YgdGhlIGltYWdlIGVsZW1lbnQgaXMgcG9zaXRpb25lZCB3aGVyZSB0aGUgbW91c2UgaXNcbiAgICB0aGlzLmFuaW1hdGFibGVQcm9wZXJ0aWVzLnR4LmN1cnJlbnQgPSBNYXRoLmFicyhtb3VzZXBvcy54IC0gdGhpcy5ib3VuZHMuZWwubGVmdCkgLSB0aGlzLmJvdW5kcy5yZXZlYWwud2lkdGggLyAyXG4gICAgdGhpcy5hbmltYXRhYmxlUHJvcGVydGllcy50eS5jdXJyZW50ID0gTWF0aC5hYnMobW91c2Vwb3MueSAtIHRoaXMuYm91bmRzLmVsLnRvcCkgLSB0aGlzLmJvdW5kcy5yZXZlYWwuaGVpZ2h0IC8gMlxuICAgIC8vIG5ldyByb3RhdGlvbiB2YWx1ZVxuICAgIHRoaXMuYW5pbWF0YWJsZVByb3BlcnRpZXMucm90YXRpb24uY3VycmVudCA9IHRoaXMuZmlyc3RSQUZDeWNsZSA/IDAgOiBtYXAobW91c2VEaXN0YW5jZVgsIDAsIDEwMCwgMCwgZGlyZWN0aW9uLnggPCAwID8gNjAgOiAtNjApXG4gICAgLy8gbmV3IGZpbHRlciB2YWx1ZVxuICAgIHRoaXMuYW5pbWF0YWJsZVByb3BlcnRpZXMuYnJpZ2h0bmVzcy5jdXJyZW50ID0gdGhpcy5maXJzdFJBRkN5Y2xlID8gMSA6IG1hcChtb3VzZURpc3RhbmNlWCwgMCwgMTAwLCAxLCA0KVxuXG4gICAgLy8gc2V0IHVwIHRoZSBpbnRlcnBvbGF0ZWQgdmFsdWVzXG4gICAgLy8gZm9yIHRoZSBmaXJzdCBjeWNsZSwgYm90aCB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlcyBuZWVkIHRvIGJlIHRoZSBzYW1lIHNvIHRoZXJlJ3Mgbm8gXCJsZXJwZWRcIiBhbmltYXRpb24gYmV0d2VlbiB0aGUgcHJldmlvdXMgYW5kIGN1cnJlbnQgc3RhdGVcbiAgICB0aGlzLmFuaW1hdGFibGVQcm9wZXJ0aWVzLnR4LnByZXZpb3VzID0gdGhpcy5maXJzdFJBRkN5Y2xlID8gdGhpcy5hbmltYXRhYmxlUHJvcGVydGllcy50eC5jdXJyZW50IDogbGVycCh0aGlzLmFuaW1hdGFibGVQcm9wZXJ0aWVzLnR4LnByZXZpb3VzLCB0aGlzLmFuaW1hdGFibGVQcm9wZXJ0aWVzLnR4LmN1cnJlbnQsIHRoaXMuYW5pbWF0YWJsZVByb3BlcnRpZXMudHguYW10KVxuICAgIHRoaXMuYW5pbWF0YWJsZVByb3BlcnRpZXMudHkucHJldmlvdXMgPSB0aGlzLmZpcnN0UkFGQ3ljbGUgPyB0aGlzLmFuaW1hdGFibGVQcm9wZXJ0aWVzLnR5LmN1cnJlbnQgOiBsZXJwKHRoaXMuYW5pbWF0YWJsZVByb3BlcnRpZXMudHkucHJldmlvdXMsIHRoaXMuYW5pbWF0YWJsZVByb3BlcnRpZXMudHkuY3VycmVudCwgdGhpcy5hbmltYXRhYmxlUHJvcGVydGllcy50eS5hbXQpXG4gICAgdGhpcy5hbmltYXRhYmxlUHJvcGVydGllcy5yb3RhdGlvbi5wcmV2aW91cyA9IHRoaXMuZmlyc3RSQUZDeWNsZSA/IHRoaXMuYW5pbWF0YWJsZVByb3BlcnRpZXMucm90YXRpb24uY3VycmVudCA6IGxlcnAodGhpcy5hbmltYXRhYmxlUHJvcGVydGllcy5yb3RhdGlvbi5wcmV2aW91cywgdGhpcy5hbmltYXRhYmxlUHJvcGVydGllcy5yb3RhdGlvbi5jdXJyZW50LCB0aGlzLmFuaW1hdGFibGVQcm9wZXJ0aWVzLnJvdGF0aW9uLmFtdClcbiAgICB0aGlzLmFuaW1hdGFibGVQcm9wZXJ0aWVzLmJyaWdodG5lc3MucHJldmlvdXMgPSB0aGlzLmZpcnN0UkFGQ3ljbGUgPyB0aGlzLmFuaW1hdGFibGVQcm9wZXJ0aWVzLmJyaWdodG5lc3MuY3VycmVudCA6IGxlcnAodGhpcy5hbmltYXRhYmxlUHJvcGVydGllcy5icmlnaHRuZXNzLnByZXZpb3VzLCB0aGlzLmFuaW1hdGFibGVQcm9wZXJ0aWVzLmJyaWdodG5lc3MuY3VycmVudCwgdGhpcy5hbmltYXRhYmxlUHJvcGVydGllcy5icmlnaHRuZXNzLmFtdClcblxuICAgIC8vIHNldCBzdHlsZXNcbiAgICBHU0FQLnNldCh0aGlzLkRPTS5yZXZlYWwsIHtcbiAgICAgIHg6IHRoaXMuYW5pbWF0YWJsZVByb3BlcnRpZXMudHgucHJldmlvdXMsXG4gICAgICB5OiB0aGlzLmFuaW1hdGFibGVQcm9wZXJ0aWVzLnR5LnByZXZpb3VzLFxuICAgICAgcm90YXRpb246IHRoaXMuYW5pbWF0YWJsZVByb3BlcnRpZXMucm90YXRpb24ucHJldmlvdXMsXG4gICAgICBmaWx0ZXI6IGBicmlnaHRuZXNzKCR7dGhpcy5hbmltYXRhYmxlUHJvcGVydGllcy5icmlnaHRuZXNzLnByZXZpb3VzfSlgXG4gICAgfSlcblxuICAgIC8vIGxvb3BcbiAgICB0aGlzLmZpcnN0UkFGQ3ljbGUgPSBmYWxzZVxuICAgIHRoaXMubG9vcFJlbmRlcigpXG4gIH1cblxuICBhZGRFdmVudExpc3RlbmVycyAoKSB7XG4gICAgLy8gdXBkYXRlIG1vdXNlIHBvc2l0aW9uIHdoZW4gbW92aW5nIHRoZSBtb3VzZVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBldiA9PiBtb3VzZXBvcyA9IGdldE1vdXNlUG9zKGV2KSlcblxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5vbk1vdXNlRW50ZXIpXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLm9uTW91c2VMZWF2ZSlcbiAgfVxuXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzICgpIHtcblxuICB9XG59XG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCJhOGMyNzg2NzMxODA5ZjhiNTEwYVwiKSJdLCJuYW1lcyI6WyJtb3VzZXBvcyIsIngiLCJ5IiwibW91c2VQb3NDYWNoZSIsImRpcmVjdGlvbiIsIkFuaW1hdGlvbiIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwiZWxlbWVudCIsInN1cGVyIiwidGhpcyIsIkRPTSIsImltYWdlIiwiZ2V0QXR0cmlidXRlIiwibGF5b3V0IiwiaW5pdEV2ZW50cyIsInJldmVhbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInJldmVhbElubmVyIiwicmV2ZWFsSW1hZ2UiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImFwcGVuZENoaWxkIiwiZWwiLCJvbk1vdXNlRW50ZXIiLCJzaG93SW1hZ2UiLCJmaXJzdFJBRkN5Y2xlIiwibG9vcFJlbmRlciIsIm9uTW91c2VMZWF2ZSIsInN0b3BSZW5kZXJpbmciLCJoaWRlSW1hZ2UiLCJHU0FQIiwidGwiLCJvblN0YXJ0Iiwib3BhY2l0eSIsInpJbmRleCIsImltYWdlcyIsImxlbmd0aCIsInRvIiwiZWFzZSIsInN0YXJ0QXQiLCJvbkNvbXBsZXRlIiwicmVxdWVzdElkIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVuZGVyIiwid2luZG93IiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJ1bmRlZmluZWQiLCJjYWxjQm91bmRzIiwibW91c2VEaXN0YW5jZVgiLCJjbGFtcCIsIk1hdGgiLCJhYnMiLCJhbmltYXRhYmxlUHJvcGVydGllcyIsInR4IiwiY3VycmVudCIsImJvdW5kcyIsImxlZnQiLCJ3aWR0aCIsInR5IiwidG9wIiwiaGVpZ2h0Iiwicm90YXRpb24iLCJtYXAiLCJicmlnaHRuZXNzIiwicHJldmlvdXMiLCJsZXJwIiwiYW10IiwiZmlsdGVyIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZXYiLCJnZXRNb3VzZVBvcyIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9